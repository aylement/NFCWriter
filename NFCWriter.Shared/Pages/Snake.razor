@page "/Snake"
@inject IJSRuntime JS

<h2>🐍 Snake Game</h2>

<canvas id="snakeCanvas" width="400" height="400" style="border:1px solid #ccc;"></canvas>

<div class="touch-controls">
    <div class="row">
        <button class="control-btn" @onclick="@(() => SetDirection("UP"))">⬆️</button>
    </div>
    <div class="row">
        <button class="control-btn" @onclick="@(() => SetDirection("LEFT"))">⬅️</button>
        <button class="control-btn" @onclick="@(() => SetDirection("RIGHT"))">➡️</button>
    </div>
    <div class="row">
        <button class="control-btn" @onclick="@(() => SetDirection("DOWN"))">⬇️</button>
    </div>
</div>
<div style="margin-top: 1rem;">
    <button @onclick="ResetGame">🔄 Reset Game</button>
</div>

@code {
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            await JS.InvokeVoidAsync("startSnakeGame");
        }
    }

    private async Task SetDirection(string dir)
    {
        JS.InvokeVoidAsync("setDirection", dir);
    }

    private async Task ResetGame()
    {
        await JS.InvokeVoidAsync("resetSnakeGame");
    }
}
