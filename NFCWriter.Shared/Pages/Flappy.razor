@page "/flappy"
@inject IJSRuntime JS

<h3 class="text-center">Flappy Bird 🐦</h3>

<canvas id="flappyCanvas" width="400" height="400"
        style="border:1px solid #ccc; width:100%; max-width:400px; height:auto; margin-top:1rem;"></canvas>

<div class="text-center mt-2">
    <button @onclick="ResetGame">Reset</button>
</div>

<div style="margin-top: 1rem; display:flex; align-items:center; gap:0.5rem;">
    <div style="width:150px; text-align:left;">
        Jump Strength: <span id="liftLabel">Normal 🐦</span>
    </div>
    <input type="range" id="liftSlider" min="6" max="14" step="1" value="10"
           oninput="updateLift(this.value)" style="flex:1;" />
</div>

@code {
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            await JS.InvokeVoidAsync("flappy.init");
        }
    }

    private async Task ResetGame()
    {
        await JS.InvokeVoidAsync("flappy.reset");
    }
}